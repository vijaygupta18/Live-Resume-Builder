<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaTeX-Style Resume Builder</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
            gap: 20px;
            padding: 20px;
        }

        /* Form Section Styles */
        .form-section {
            flex: 1;
            max-width: 500px;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: fit-content;
            overflow-y: auto;
            max-height: calc(100vh - 40px);
        }

        .form-section h2 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #34495e;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .section-header {
            background: #ecf0f1;
            padding: 15px;
            margin: 20px -30px;
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }

        .section-header:first-child {
            margin-top: -30px;
        }

        .dynamic-section {
            border: 1px solid #e0e0e0;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 4px;
            background: #fafafa;
            break-inside: avoid;
        }

        .dynamic-section h4 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .btn {
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: background-color 0.3s ease;
        }

        .btn:hover {
            background: #2980b9;
        }

        .btn-danger {
            background: #e74c3c;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-success {
            background: #27ae60;
            font-size: 16px;
            padding: 12px 24px;
            margin-top: 20px;
        }

        .btn-success:hover {
            background: #229954;
        }

        .bullet-point {
            margin-bottom: 10px;
        }

        .bullet-point input {
            margin-bottom: 5px;
        }

        /* Preview Section Styles */
        .preview-section {
            flex: 1;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 20px;
            height: calc(100vh - 40px);
            overflow-y: auto;
        }

        .preview-header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        /* LaTeX-style Resume Preview */
        .resume-preview {
            padding: 40px;
            font-family: 'Computer Modern', 'Times New Roman', serif;
            font-size: 11pt;
            line-height: 1.1;
            color: #000;
            background: white;
            min-height: 11in;
            width: 8.5in;
            margin: 0 auto;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        /* LaTeX-style Typography */
        .resume-name {
            font-size: 24pt;
            font-weight: bold;
            text-align: center;
            margin-bottom: 8pt;
            margin-top: -23pt;
            font-family: 'Computer Modern', serif;
        }

        .resume-contact {
            text-align: center;
            margin-bottom: 10pt;
            font-size: 10pt;
        }

        .resume-contact span {
            margin: 0 10px;
            white-space: nowrap;
        }

        .resume-contact-link {
            color: #000;
            text-decoration: none;
            margin: 0 10px;
        }

        .resume-contact-link:hover {
            text-decoration: underline;
        }

        .resume-section-title {
            font-size: 14pt;
            font-weight: bold;
            margin-top: 10pt;
            margin-bottom: 4pt;
            border-bottom: 1px solid #000;
            padding-bottom: 1pt;
        }

        .resume-subsection {
            margin-bottom: 6pt;
            page-break-inside: avoid;
        }

        .resume-item-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 2pt;
        }

        .resume-item-title {
            font-weight: bold;
            font-size: 11pt;
        }

        .resume-item-company {
            font-weight: bold;
            font-size: 13pt;
        }

        .resume-item-location {
            font-size: 10pt;
        }

        .resume-item-date {
            font-size: 10pt;
            font-style: italic;
        }

        .resume-bullet-points {
            margin-left: 20pt;
            margin-top: 2pt;
        }

        .resume-bullet-points li {
            margin-bottom: 0.1pt;
            list-style-type: disc;
        }

        .resume-skills-category {
            margin-bottom: 1pt;
            page-break-inside: avoid;
        }

        .resume-skills-title {
            font-weight: bold;
            display: inline;
        }

        .resume-skills-list {
            display: inline;
            margin-left: 8pt;
        }

        .resume-summary {
            text-align: justify;
            margin-bottom: 12pt;
            page-break-inside: avoid;
        }

        .education-item {
            margin-bottom: 6pt;
            page-break-inside: avoid;
        }

        .education-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4pt;
        }

        .education-details {
            font-size: 10pt;
        }

        .project-tech {
            font-style: italic;
            font-size: 10pt;
            margin-bottom: 1pt;
        }

        /* Profiles section styling */
        .profiles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .profile-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
            text-align: center;
        }

        .profile-item strong {
            display: block;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .profile-item a {
            color: #3498db;
            text-decoration: none;
            font-size: 10pt;
        }

        .resume-profiles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150pt, 1fr));
            justify-items: center;
            gap: 15pt;
            margin-bottom: 8pt;
            width: 100%;
        }

        .resume-profile-item {
            font-size: 11pt;
            text-align: center;
        }

        .resume-profile-name {
            font-weight: bold;
            margin-bottom: 2pt;
        }

        .resume-profile-link {
            color: #0066cc;
            text-decoration: underline;
            font-weight: bold;
        }

        .resume-profile-link:hover {
            color: #0052a3;
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                margin: 0;
                padding: 0;
            }
            
            .container {
                display: block;
                padding: 0;
                margin: 0;
            }
            
            .form-section {
                display: none;
            }
            
            .preview-section {
                position: static;
                height: auto;
                max-height: none;
                overflow: visible;
                box-shadow: none;
                border-radius: 0;
            }
            
            .preview-header {
                display: none;
            }
            
            .resume-preview {
                margin: 0;
                padding: 1in;
                box-shadow: none;
                width: 100%;
                min-height: auto;
            }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
            }
            
            .form-section,
            .preview-section {
                max-width: none;
                height: auto;
                max-height: none;
                position: static;
            }
            
            .resume-preview {
                width: 100%;
                padding: 20px;
            }
        }

        .input-row {
            display: flex;
            gap: 10px;
        }

        .input-row .form-group {
            flex: 1;
        }

        .profiles-input-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .profiles-input-row .form-group {
            flex: 1;
        }

        .project-tech-inline {
            font-style: italic;
            font-size: 10pt;
            margin-bottom: 1pt;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Form Section -->
        <div class="form-section">
            <h2>Resume Builder</h2>
            
            <!-- Header Section -->
            <div class="section-header">Personal Information</div>
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" placeholder="John Doe" value="Jane Smith">
            </div>
            <div class="input-row">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="john.doe@email.com" value="jane.smith@email.com">
                </div>
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" placeholder="+1 (555) 123-4567" value="+1 (555) 987-6543">
                </div>
            </div>
            <div class="form-group">
                <label for="linkedin">LinkedIn</label>
                <input type="url" id="linkedin" placeholder="linkedin.com/in/johndoe" value="linkedin.com/in/janesmith">
            </div>

            <!-- Profiles Section -->
            <div class="section-header">Profiles</div>
            <div id="profiles-container">
                <div class="dynamic-section">
                    <h4>Profile #1</h4>
                    <div class="profiles-input-row">
                        <div class="form-group">
                            <label>Platform Name</label>
                            <input type="text" class="profile-name" placeholder="GitHub" value="GitHub">
                        </div>
                        <div class="form-group">
                            <label>Profile URL</label>
                            <input type="url" class="profile-url" placeholder="github.com/username" value="github.com/janesmithdev">
                        </div>
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeProfile(this)">Remove</button>
                </div>
                <div class="dynamic-section">
                    <h4>Profile #2</h4>
                    <div class="profiles-input-row">
                        <div class="form-group">
                            <label>Platform Name</label>
                            <input type="text" class="profile-name" placeholder="CodeChef" value="CodeChef">
                        </div>
                        <div class="form-group">
                            <label>Profile URL</label>
                            <input type="url" class="profile-url" placeholder="codechef.com/users/username" value="codechef.com/users/janesmithuser">
                        </div>
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeProfile(this)">Remove</button>
                </div>
                <div class="dynamic-section">
                    <h4>Profile #3</h4>
                    <div class="profiles-input-row">
                        <div class="form-group">
                            <label>Platform Name</label>
                            <input type="text" class="profile-name" placeholder="LeetCode" value="LeetCode">
                        </div>
                        <div class="form-group">
                            <label>Profile URL</label>
                            <input type="url" class="profile-url" placeholder="leetcode.com/username" value="leetcode.com/janesmithcode">
                        </div>
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeProfile(this)">Remove</button>
                </div>
            </div>
            <button type="button" class="btn" onclick="addProfile()">Add Profile</button>

            <!-- Summary Section -->
            <div class="section-header">Summary</div>
            <div class="form-group">
                <label for="summary">Professional Summary</label>
                <textarea id="summary" placeholder="Write a brief professional summary...">Highly motivated and results-oriented software engineer with 5+ years of experience in developing and deploying scalable web applications. Proficient in front-end and back-end technologies, with a strong focus on creating efficient, maintainable, and robust code. Passionate about solving complex problems and continuously learning new technologies.</textarea>
            </div>

            <!-- Education Section -->
            <div class="section-header">Education</div>
            <div id="education-container">
                <div class="dynamic-section">
                    <h4>Education #1</h4>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Degree</label>
                            <input type="text" class="education-degree" placeholder="Bachelor of Science" value="Bachelor of Science">
                        </div>
                        <div class="form-group">
                            <label>Field</label>
                            <input type="text" class="education-field" placeholder="Computer Science" value="Computer Science">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="form-group">
                            <label>University</label>
                            <input type="text" class="education-university" placeholder="University Name" value="Major University">
                        </div>
                        <div class="form-group">
                            <label>Year</label>
                            <input type="text" class="education-year" placeholder="2020-2024" value="2016 -- 2020">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" class="education-location" placeholder="City, State" value="Major City, State">
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeEducation(this)">Remove</button>
                </div>
            </div>
            <button type="button" class="btn" onclick="addEducation()">Add Education</button>

            <!-- Experience Section -->
            <div class="section-header">Experience</div>
            <div id="experience-container">
                <div class="dynamic-section">
                    <h4>Experience #1</h4>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Job Title</label>
                            <input type="text" class="experience-title" placeholder="Software Engineer" value="Senior Software Engineer">
                        </div>
                        <div class="form-group">
                            <label>Company</label>
                            <input type="text" class="experience-company" placeholder="Company Name" value="Tech Solutions Inc.">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" class="experience-location" placeholder="City, State" value="San Francisco, CA">
                        </div>
                        <div class="form-group">
                            <label>Duration</label>
                            <input type="text" class="experience-duration" placeholder="Jan 2023 - Present" value="June 2021 - Present">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Responsibilities (one per line)</label>
                        <textarea class="experience-bullets" placeholder="• Developed web applications using React and Node.js&#10;• Collaborated with cross-functional teams&#10;• Improved system performance by 30%">• Led a team of 4 engineers in developing a new microservice architecture using Node.js and Kafka, improving system scalability by 50%.&#10;• Designed and implemented a new data caching strategy with Redis, reducing database load by 30% and improving response times.&#10;• Collaborated with product managers to define requirements and deliver features on a two-week sprint cycle.</textarea>
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeExperience(this)">Remove</button>
                </div>
                <div class="dynamic-section">
                    <h4>Experience #2</h4>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Job Title</label>
                            <input type="text" class="experience-title" placeholder="Software Engineer" value="Software Engineer">
                        </div>
                        <div class="form-group">
                            <label>Company</label>
                            <input type="text" class="experience-company" placeholder="Company Name" value="Innovative Solutions Ltd.">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" class="experience-location" placeholder="City, State" value="Seattle, WA">
                        </div>
                        <div class="form-group">
                            <label>Duration</label>
                            <input type="text" class="experience-duration" placeholder="Jan 2023 - Present" value="July 2018 - May 2021">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Responsibilities (one per line)</label>
                        <textarea class="experience-bullets" placeholder="• Developed web applications using React and Node.js&#10;• Collaborated with cross-functional teams&#10;• Improved system performance by 30%">• Developed and maintained RESTful APIs using Python and Flask, serving over 10,000 daily active users.&#10;• Implemented new features based on user feedback, resulting in a 15% increase in feature adoption.&#10;• Participated in code reviews and mentored junior engineers on best practices.</textarea>
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeExperience(this)">Remove</button>
                </div>
            </div>
            <button type="button" class="btn" onclick="addExperience()">Add Experience</button>

            <!-- Achievements Section -->
            <div class="section-header">Achievements</div>
            <div id="achievements-container">
                <div class="dynamic-section">
                    <h4>Achievement #1</h4>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Achievement Title</label>
                            <input type="text" class="achievement-title" placeholder="Award/Recognition Title" value="Dean's List">
                        </div>
                        <div class="form-group">
                            <label>Organization/Platform</label>
                            <input type="text" class="achievement-organization" placeholder="Organization Name" value="Major University">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Date/Year</label>
                            <input type="text" class="achievement-date" placeholder="Date achieved" value="2019, 2020">
                        </div>
                        <div class="form-group">
                            <label>Details (Optional)</label>
                            <input type="text" class="achievement-details" placeholder="Additional details" value="Top 10% of class">
                        </div>
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeAchievement(this)">Remove</button>
                </div>
                <div class="dynamic-section">
                    <h4>Achievement #2</h4>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Achievement Title</label>
                            <input type="text" class="achievement-title" placeholder="Award/Recognition Title" value="First Place in Annual Hackathon">
                        </div>
                        <div class="form-group">
                            <label>Organization/Platform</label>
                            <input type="text" class="achievement-organization" placeholder="Organization Name" value="Tech Community Group">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Date/Year</label>
                            <input type="text" class="achievement-date" placeholder="Date achieved" value="November 2022">
                        </div>
                        <div class="form-group">
                            <label>Details (Optional)</label>
                            <input type="text" class="achievement-details" placeholder="Additional details" value="Developed a winning solution for a smart city challenge">
                        </div>
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeAchievement(this)">Remove</button>
                </div>
            </div>
            <button type="button" class="btn" onclick="addAchievement()">Add Achievement</button>

            <!-- Projects Section -->
            <div class="section-header">Projects</div>
            <div id="projects-container">
                <div class="dynamic-section">
                    <h4>Project #1</h4>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Project Name</label>
                            <input type="text" class="project-name" placeholder="E-commerce Platform" value="Online Learning Platform">
                        </div>
                        <div class="form-group">
                            <label>Technologies Used</label>
                            <input type="text" class="project-tech" placeholder="React, Node.js, MongoDB" value="React, Node.js, PostgreSQL, Docker">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description & Achievements (one per line)</label>
                        <textarea class="project-bullets" placeholder="• Built a full-stack e-commerce platform&#10;• Implemented secure payment processing&#10;• Achieved 99.9% uptime">• Developed a full-stack platform with user authentication, course management, and progress tracking.&#10;• Implemented a responsive UI with React and integrated with a Node.js backend.&#10;• Containerized the application using Docker for easy deployment.</textarea>
                    </div>
                    <div class="form-group">
                        <label>GitHub URL (Optional)</label>
                        <input type="url" class="project-github" placeholder="github.com/username/project" value="github.com/janesmithdev/online-edu">
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeProject(this)">Remove</button>
                </div>
                <div class="dynamic-section">
                    <h4>Project #2</h4>
                    <div class="input-row">
                        <div class="form-group">
                            <label>Project Name</label>
                            <input type="text" class="project-name" placeholder="E-commerce Platform" value="Personal Portfolio Website">
                        </div>
                        <div class="form-group">
                            <label>Technologies Used</label>
                            <input type="text" class="project-tech" placeholder="React, Node.js, MongoDB" value="HTML, CSS, JavaScript, GitHub Pages">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description & Achievements (one per line)</label>
                        <textarea class="project-bullets" placeholder="• Built a full-stack e-commerce platform&#10;• Implemented secure payment processing&#10;• Achieved 99.9% uptime">• Designed and developed a personal website to showcase projects and skills.&#10;• Used modern CSS techniques for a clean and responsive design.&#10;• Hosted the website on GitHub Pages for free and easy deployment.</textarea>
                    </div>
                    <div class="form-group">
                        <label>GitHub URL (Optional)</label>
                        <input type="url" class="project-github" placeholder="github.com/username/project" value="github.com/janesmithdev/portfolio">
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeProject(this)">Remove</button>
                </div>
            </div>
            <button type="button" class="btn" onclick="addProject()">Add Project</button>

            <!-- Skills Section -->
            <div class="section-header">Skills</div>
            <div id="skills-container">
                <div class="dynamic-section">
                    <h4>Skill Category #1</h4>
                    <div class="form-group">
                        <label>Category Name</label>
                        <input type="text" class="skill-category" placeholder="Programming Languages" value="Languages">
                    </div>
                    <div class="form-group">
                        <label>Skills (comma-separated)</label>
                        <input type="text" class="skill-items" placeholder="JavaScript, Python, Java, C++" value="JavaScript, Python, Java, C++, Ruby">
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeSkill(this)">Remove</button>
                </div>
                <div class="dynamic-section">
                    <h4>Skill Category #2</h4>
                    <div class="form-group">
                        <label>Category Name</label>
                        <input type="text" class="skill-category" placeholder="Programming Languages" value="Backend">
                    </div>
                    <div class="form-group">
                        <label>Skills (comma-separated)</label>
                        <input type="text" class="skill-items" placeholder="JavaScript, Python, Java, C++" value="Node.js, Django, Ruby on Rails, PostgreSQL, MongoDB, REST APIs">
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeSkill(this)">Remove</button>
                </div>
                <div class="dynamic-section">
                    <h4>Skill Category #3</h4>
                    <div class="form-group">
                        <label>Category Name</label>
                        <input type="text" class="skill-category" placeholder="Programming Languages" value="Cloud & DevOps">
                    </div>
                    <div class="form-group">
                        <label>Skills (comma-separated)</label>
                        <input type="text" class="skill-items" placeholder="JavaScript, Python, Java, C++" value="AWS, Docker, Git, CI/CD">
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeSkill(this)">Remove</button>
                </div>
            </div>
            <button type="button" class="btn" onclick="addSkill()">Add Skill Category</button>

            <!-- Download Button -->
            <button type="button" class="btn btn-success" onclick="downloadPDF()">Download PDF</button>

            <!-- Scale Slider -->
            <div class="form-group">
                <label for="scale-slider">Render Scale (Affects Quality & Size)</label>
                <input type="range" id="scale-slider" min="1" max="4" value="2" step="0.1">
                <span id="scale-value">3.0</span>
            </div>
        </div>

        <!-- Preview Section -->
        <div class="preview-section">
            <div class="preview-header">Live Preview</div>
            <div class="resume-preview" id="resume-preview">
                <!-- Resume content will be generated here -->
            </div>
        </div>
    </div>

    <script>
        // Global counters for dynamic sections
        let educationCount = 1;
        let experienceCount = 2;
        let projectCount = 2;
        let skillCount = 3;
        let achievementCount = 2;
        let profileCount = 3;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners to all form inputs
            addEventListeners();
            // Add event listener for the scale slider
            const scaleSlider = document.getElementById('scale-slider');
            const scaleValueSpan = document.getElementById('scale-value');
            scaleSlider.addEventListener('input', function() {
                scaleValueSpan.textContent = parseFloat(this.value).toFixed(1);
            });
            // Generate initial preview
            updatePreview();
        });

        function addEventListeners() {
            // Add listeners to all existing inputs
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', updatePreview);
            });
        }

        function updatePreview() {
            const preview = document.getElementById('resume-preview');
            
            // Get all form data
            const data = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                linkedin: document.getElementById('linkedin').value,
                summary: document.getElementById('summary').value,
                profiles: getProfilesData(),
                education: getEducationData(),
                experience: getExperienceData(),
                achievements: getAchievementsData(),
                projects: getProjectsData(),
                skills: getSkillsData()
            };

            // Generate HTML
            preview.innerHTML = generateResumeHTML(data);
        }

        function generateResumeHTML(data) {
            let html = '';

            // Header
            html += `<div class="resume-name">${data.name || 'Your Name'}</div>`;
            
            // Contact info
            const contactInfo = [];
            if (data.email) contactInfo.push(data.email);
            if (data.phone) contactInfo.push(data.phone);
            if (data.linkedin) contactInfo.push(data.linkedin);
            
            if (contactInfo.length > 0) {
                // Create links for email and potentially others later
                const contactHtml = contactInfo.map(item => {
                    if (item.includes('@') && item.includes('.')) { // Simple check for email format
                        return `<a href="mailto:${item}" class="resume-contact-link">${item}</a>`;
                    } else if (item.startsWith('linkedin.com/')) { // Add styling for LinkedIn if needed
                        return `<a href="https://${item}" target="_blank" class="resume-contact-link">${item}</a>`;
                    } else { // Default for phone or other items
                        return `<span>${item}</span>`;
                    }
                }).join(' || ');

                html += `<div class="resume-contact">${contactHtml}</div>`;
            }

            // Summary
            if (data.summary) {
                html += `<div class="resume-section-title">SUMMARY</div>`;
                html += `<div class="resume-summary">${data.summary}</div>`;
            }

            // Education
            if (data.education.length > 0) {
                html += `<div class="resume-section-title">EDUCATION</div>`;
                data.education.forEach(edu => {
                    if (edu.degree || edu.field || edu.university) {
                         html += `<div class="education-item">`;
                         html += `<div class="education-header">`;
                         // Left side: University
                         html += `<div><strong>${edu.university}</strong></div>`;
                         // Right side: Location
                         if (edu.location) html += `<div>${edu.location}</div>`;
                         html += `</div>`;
                         // New line for Degree details and Year
                         html += `<div class="education-header">`; // Reusing education-header for layout
                         // Left side: Degree and Field
                         html += `<div>`;
                         if (edu.degree) html += `${edu.degree}`; // Degree
                         if (edu.field) html += ` in ${edu.field}`; // Field
                         // Note: If you need to include extra details like CGPA, add them to the Degree or Field input fields in the form.
                         html += `</div>`;
                         // Right side: Year/Date Range
                         if (edu.year) {
                              html += `<div><em>${edu.year}</em></div>`; // Consistently put Year content on the right
                         }
                         html += `</div>`;
                         html += `</div>`;
                    }
                });
            }

            // Experience
            if (data.experience.length > 0) {
                html += `<div class="resume-section-title">EXPERIENCE</div>`;
                data.experience.forEach(exp => {
                    if (exp.title || exp.company) {
                        html += `<div class="resume-subsection">`;
                        
                        // Line 1: Company Name (Left) and Duration (Right)
                        html += `<div class="resume-item-header">`; // Reusing header class for flex layout
                        html += `<div><span class="resume-item-company">${exp.company}</span></div>`; // Company on the left
                        if (exp.duration) html += `<div><span class="resume-item-date">${exp.duration}</span></div>`; // Duration on the right
                        html += `</div>`;
                        
                        // Line 2: Job Title (Left) and Location (Right)
                        html += `<div class="resume-item-header">`; // Another header for the second line
                        html += `<div><span class="resume-item-title">${exp.title}</span></div>`; // Job Title on the left
                        if (exp.location) html += `<div><span class="resume-item-location">${exp.location}</span></div>`; // Location on the right
                        html += `</div>`;
                        
                        if (exp.bullets.length > 0) {
                            html += `<ul class="resume-bullet-points">`;
                            exp.bullets.forEach(bullet => {
                                if (bullet.trim()) {
                                    const cleanBullet = bullet.replace(/^[•\-\*]\s*/, '');
                                    html += `<li>${cleanBullet}</li>`;
                                }
                            });
                            html += `</ul>`;
                        }
                        html += `</div>`;
                    }
                });
            }

            // Projects
            if (data.projects.length > 0) {
                html += `<div class="resume-section-title">PROJECTS</div>`;
                data.projects.forEach(project => {
                    if (project.name) {
                        html += `<div class="resume-subsection">`;
                        html += `<div class="resume-item-header">`;
                        html += `<div>`;
                        html += `<span class="resume-item-title">${project.name}</span>`;
                        if (project.tech) {
                             html += ` — <span class="project-tech-inline">${project.tech}</span>`;
                        }
                        html += `</div>`;
                        if (project.github) {
                            html += `<div class="resume-item-date"><a href="https://${project.github}" target="_blank" class="resume-profile-link">GitHub</a></div>`;
                        }
                        html += `</div>`;
                        
                        if (project.bullets.length > 0) {
                            html += `<ul class="resume-bullet-points">`;
                            project.bullets.forEach(bullet => {
                                if (bullet.trim()) {
                                    const cleanBullet = bullet.replace(/^[•\-\*]\s*/, '');
                                    html += `<li>${cleanBullet}</li>`;
                                }
                            });
                            html += `</ul>`;
                        }
                        html += `</div>`;
                    }
                });
            }

            // Skills (2nd last section before profiles)
            if (data.skills.length > 0) {
                html += `<div class="resume-section-title">SKILLS</div>`;
                data.skills.forEach(skillCategory => {
                    if (skillCategory.category && skillCategory.items) {
                        html += `<div class="resume-skills-category">`;
                        html += `<span class="resume-skills-title">${skillCategory.category}:</span>`;
                        html += `<span class="resume-skills-list">${skillCategory.items}</span>`;
                        html += `</div>`;
                    }
                });
            }

            // Achievements (2nd last, optional like summary)
            if (data.achievements.length > 0 && data.achievements.some(ach => ach.title)) {
                html += `<div class="resume-section-title">ACHIEVEMENTS</div>`;
                data.achievements.forEach(ach => {
                    if (ach.title) {
                        html += `<div class="resume-subsection">`;
                        html += `<div class="resume-item-header">`;
                        html += `<div>`;
                        html += `<span class="resume-item-title">${ach.title}</span>`;
                        if (ach.organization) html += ` — <span class="resume-item-company">${ach.organization}</span>`;
                        if (ach.details) html += ` — <span class="resume-item-location">${ach.details}</span>`;
                        html += `</div>`;
                        if (ach.date) html += `<div class="resume-item-date">${ach.date}</div>`;
                        html += `</div>`;
                        html += `</div>`;
                    }
                });
            }

            // Profiles section (at the very bottom)
            if (data.profiles.length > 0 && data.profiles.some(profile => profile.name && profile.url)) {
                html += `<div class="resume-section-title">PROFILES</div>`;
                html += `<div class="resume-profiles">`;
                data.profiles.forEach(profile => {
                    if (profile.name && profile.url) {
                        html += `<div class="resume-profile-item">`;
                        // Make the platform name clickable
                        html += `<a href="https://${profile.url}" class="resume-profile-link" target="_blank">${profile.name}</a>`;
                        html += `</div>`;
                    }
                });
                html += `</div>`;
            }

            return html;
        }

        // Data collection functions
        function getProfilesData() {
            const profileSections = document.querySelectorAll('#profiles-container .dynamic-section');
            return Array.from(profileSections).map(section => ({
                name: section.querySelector('.profile-name').value,
                url: section.querySelector('.profile-url').value
            }));
        }

        function getEducationData() {
            const educationSections = document.querySelectorAll('#education-container .dynamic-section');
            return Array.from(educationSections).map(section => ({
                degree: section.querySelector('.education-degree').value,
                field: section.querySelector('.education-field').value,
                university: section.querySelector('.education-university').value,
                year: section.querySelector('.education-year').value,
                location: section.querySelector('.education-location').value
            }));
        }

        function getExperienceData() {
            const experienceSections = document.querySelectorAll('#experience-container .dynamic-section');
            return Array.from(experienceSections).map(section => ({
                title: section.querySelector('.experience-title').value,
                company: section.querySelector('.experience-company').value,
                location: section.querySelector('.experience-location').value,
                duration: section.querySelector('.experience-duration').value,
                bullets: section.querySelector('.experience-bullets').value.split('\n').filter(bullet => bullet.trim())
            }));
        }

        function getAchievementsData() {
            const achievementSections = document.querySelectorAll('#achievements-container .dynamic-section');
            return Array.from(achievementSections).map(section => ({
                title: section.querySelector('.achievement-title').value,
                organization: section.querySelector('.achievement-organization').value,
                date: section.querySelector('.achievement-date').value,
                details: section.querySelector('.achievement-details').value
            }));
        }

        function getProjectsData() {
            const projectSections = document.querySelectorAll('#projects-container .dynamic-section');
            return Array.from(projectSections).map(section => ({
                name: section.querySelector('.project-name').value,
                tech: section.querySelector('.project-tech').value,
                bullets: section.querySelector('.project-bullets').value.split('\n').filter(bullet => bullet.trim()),
                github: section.querySelector('.project-github').value
            }));
        }

        function getSkillsData() {
            const skillSections = document.querySelectorAll('#skills-container .dynamic-section');
            return Array.from(skillSections).map(section => ({
                category: section.querySelector('.skill-category').value,
                items: section.querySelector('.skill-items').value
            }));
        }

        // Dynamic section management
        function addProfile() {
            profileCount++;
            const container = document.getElementById('profiles-container');
            const newSection = document.createElement('div');
            newSection.className = 'dynamic-section';
            newSection.innerHTML = `
                <h4>Profile #${profileCount}</h4>
                <div class="profiles-input-row">
                    <div class="form-group">
                        <label>Platform Name</label>
                        <input type="text" class="profile-name" placeholder="Platform Name">
                    </div>
                    <div class="form-group">
                        <label>Profile URL</label>
                        <input type="url" class="profile-url" placeholder="profile-url.com/username">
                    </div>
                </div>
                <button type="button" class="btn btn-danger" onclick="removeProfile(this)">Remove</button>
            `;
            container.appendChild(newSection);
            addEventListenersToElement(newSection);
            updatePreview();
        }

        function removeProfile(button) {
            button.parentElement.remove();
            updatePreview();
        }

        function addEducation() {
            educationCount++;
            const container = document.getElementById('education-container');
            const newSection = document.createElement('div');
            newSection.className = 'dynamic-section';
            newSection.innerHTML = `
                <h4>Education #${educationCount}</h4>
                <div class="input-row">
                    <div class="form-group">
                        <label>Degree</label>
                        <input type="text" class="education-degree" placeholder="Bachelor of Science">
                    </div>
                    <div class="form-group">
                        <label>Field</label>
                        <input type="text" class="education-field" placeholder="Computer Science">
                    </div>
                </div>
                <div class="input-row">
                    <div class="form-group">
                        <label>University</label>
                        <input type="text" class="education-university" placeholder="University Name">
                    </div>
                    <div class="form-group">
                        <label>Year</label>
                        <input type="text" class="education-year" placeholder="2020-2024">
                    </div>
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" class="education-location" placeholder="City, State">
                </div>
                <button type="button" class="btn btn-danger" onclick="removeEducation(this)">Remove</button>
            `;
            container.appendChild(newSection);
            addEventListenersToElement(newSection);
            updatePreview();
        }

        function removeEducation(button) {
            button.parentElement.remove();
            updatePreview();
        }

        function addExperience() {
            experienceCount++;
            const container = document.getElementById('experience-container');
            const newSection = document.createElement('div');
            newSection.className = 'dynamic-section';
            newSection.innerHTML = `
                <h4>Experience #${experienceCount}</h4>
                <div class="input-row">
                    <div class="form-group">
                        <label>Job Title</label>
                        <input type="text" class="experience-title" placeholder="Software Engineer">
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" class="experience-company" placeholder="Company Name">
                    </div>
                </div>
                <div class="input-row">
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" class="experience-location" placeholder="City, State">
                    </div>
                    <div class="form-group">
                        <label>Duration</label>
                        <input type="text" class="experience-duration" placeholder="Jan 2023 - Present">
                    </div>
                </div>
                <div class="form-group">
                    <label>Responsibilities (one per line)</label>
                    <textarea class="experience-bullets" placeholder="• Developed web applications using React and Node.js&#10;• Collaborated with cross-functional teams&#10;• Improved system performance by 30%"></textarea>
                </div>
                <button type="button" class="btn btn-danger" onclick="removeExperience(this)">Remove</button>
            `;
            container.appendChild(newSection);
            addEventListenersToElement(newSection);
            updatePreview();
        }

        function removeExperience(button) {
            button.parentElement.remove();
            updatePreview();
        }

        function addAchievement() {
            achievementCount++;
            const container = document.getElementById('achievements-container');
            const newSection = document.createElement('div');
            newSection.className = 'dynamic-section';
            newSection.innerHTML = `
                <h4>Achievement #${achievementCount}</h4>
                <div class="input-row">
                    <div class="form-group">
                        <label>Achievement Title</label>
                        <input type="text" class="achievement-title" placeholder="Award/Recognition Title">
                    </div>
                    <div class="form-group">
                        <label>Organization/Platform</label>
                        <input type="text" class="achievement-organization" placeholder="Organization Name">
                    </div>
                </div>
                <div class="input-row">
                    <div class="form-group">
                        <label>Date/Year</label>
                        <input type="text" class="achievement-date" placeholder="Date achieved">
                    </div>
                    <div class="form-group">
                        <label>Details (Optional)</label>
                        <input type="text" class="achievement-details" placeholder="Additional details">
                    </div>
                </div>
                <button type="button" class="btn btn-danger" onclick="removeAchievement(this)">Remove</button>
            `;
            container.appendChild(newSection);
            addEventListenersToElement(newSection);
            updatePreview();
        }

        function removeAchievement(button) {
            button.parentElement.remove();
            updatePreview();
        }

        function addProject() {
            projectCount++;
            const container = document.getElementById('projects-container');
            const newSection = document.createElement('div');
            newSection.className = 'dynamic-section';
            newSection.innerHTML = `
                <h4>Project #${projectCount}</h4>
                <div class="input-row">
                    <div class="form-group">
                        <label>Project Name</label>
                        <input type="text" class="project-name" placeholder="E-commerce Platform">
                    </div>
                    <div class="form-group">
                        <label>Technologies Used</label>
                        <input type="text" class="project-tech" placeholder="React, Node.js, MongoDB">
                    </div>
                </div>
                <div class="form-group">
                    <label>Description & Achievements (one per line)</label>
                    <textarea class="project-bullets" placeholder="• Built a full-stack e-commerce platform&#10;• Implemented secure payment processing&#10;• Achieved 99.9% uptime"></textarea>
                </div>
                <div class="form-group">
                    <label>GitHub URL (Optional)</label>
                    <input type="url" class="project-github" placeholder="github.com/username/project">
                </div>
                <button type="button" class="btn btn-danger" onclick="removeProject(this)">Remove</button>
            `;
            container.appendChild(newSection);
            addEventListenersToElement(newSection);
            updatePreview();
        }

        function removeProject(button) {
            button.parentElement.remove();
            updatePreview();
        }

        function addSkill() {
            skillCount++;
            const container = document.getElementById('skills-container');
            const newSection = document.createElement('div');
            newSection.className = 'dynamic-section';
            newSection.innerHTML = `
                <h4>Skill Category #${skillCount}</h4>
                <div class="form-group">
                    <label>Category Name</label>
                    <input type="text" class="skill-category" placeholder="Programming Languages">
                </div>
                <div class="form-group">
                    <label>Skills (comma-separated)</label>
                    <input type="text" class="skill-items" placeholder="JavaScript, Python, Java, C++">
                </div>
                <button type="button" class="btn btn-danger" onclick="removeSkill(this)">Remove</button>
            `;
            container.appendChild(newSection);
            addEventListenersToElement(newSection);
            updatePreview();
        }

        function removeSkill(button) {
            button.parentElement.remove();
            updatePreview();
        }

        function addEventListenersToElement(element) {
            const inputs = element.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', updatePreview);
            });
        }

        // PDF Download function
        function downloadPDF() {
            const element = document.getElementById('resume-preview');
            const scaleValue = parseFloat(document.getElementById('scale-slider').value);
            const opt = {
                margin: [0,0,0,0],
                filename: 'resume.pdf',
                image: { type: 'jpeg', quality: 0.99 },
                html2canvas: {
                    scale: scaleValue,
                    useCORS: true,
                    letterRendering: true
                },
                jsPDF: {
                    unit: 'in',
                    format: 'letter',
                    orientation: 'portrait',
                    margin: [0.1, 0.15, 0.15, 0.15]
                },
                pagebreak: { mode: ['css', 'legacy'] }
            };

            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html> 